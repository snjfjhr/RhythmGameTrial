<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <!-- スマホ縦固定のためのヒント -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="screen-orientation" content="portrait">
    <meta name="x5-orientation" content="portrait">
    <meta name="full-screen" content="true">
    <meta name="x5-fullscreen" content="true">

    <title>My Rhythm Game</title>

    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #000;
            touch-action: none;
        }

        /* スクリーン横向き時の対策（表示をブロック） */
        @media screen and (orientation: landscape) {
            body::before {
                content: "縦画面に戻してください";
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                display: flex;
                align-items: center;
                justify-content: center;
                background: black;
                color: white;
                font-size: 2em;
                z-index: 99999;
            }
        }

        canvas {
            display: block;
            width: 100%;
            height: 100vh;
        }
    </style>
</head>
<body>

<canvas id="gameCanvas"></canvas>

<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resize);
    resize();

    // --- ここでゲーム描画処理などを行う ---
    function gameLoop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "white";
        ctx.font = "30px sans-serif";
        ctx.fillText("Rhythm Game", 50, 80);
        requestAnimationFrame(gameLoop);
    }
    gameLoop();

    // -----------------------
    // ここから縦固定の追加コード
    // -----------------------
    async function lockOrientation() {
        if (screen.orientation && screen.orientation.lock) {
            try {
                await screen.orientation.lock("portrait");
            } catch (e) {
                console.log("Orientation lock not supported:", e);
            }
        }
    }

    // ページロード後に実行
    window.addEventListener('load', () => {
        lockOrientation();
    });

    // iOSサポート（念のため）
    window.addEventListener("orientationchange", () => {
        if (window.orientation !== 0) {
            alert("縦画面でプレイしてください");
        }
    });
</script>

</body>
</html>

